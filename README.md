

# æœŸæœ«å¤§ä½œä¸š

è¿™æ˜¯å´é€¸è±ª2018302180060ã€ç¿æ–Œ2018302180061çš„æ•°æ®åº“æœŸæœ«å¤§ä½œä¸šåç«¯ä»£ç 

## åŠŸèƒ½ä»‹ç»

æ•´ä½“ä»£ç å®ç°äº†ä¸€ä¸ªæœ€ç®€å•çº¿ä¸Šè®ºå›ï¼Œå…·ä½“åŠŸèƒ½åŒ…æ‹¬ï¼š

1. ç”¨æˆ·æ³¨å†Œç™»å½•ï¼Œç”¨æˆ·ä¿¡æ¯ä¸Šä¼ ï¼ŒåŒ…å«å§“åã€æ€§åˆ«ã€å·¥ä½œã€å¹´é¾„ã€å…´è¶£
2. ç”¨æˆ·æƒé™æ§åˆ¶ï¼Œåœ¨powerå­—æ®µå‚¨å­˜ï¼ŒåŒ…æ‹¬ 0æ¸¸å®¢ã€1æ³¨å†Œç”¨æˆ·ã€2é«˜çº§ç”¨æˆ·ã€3ç®¡ç†å‘˜ã€4å¼€å‘è€…ï¼Œæƒé™ä¾æ¬¡æ‰©å¤§
3. æ–‡ç« æ“ä½œï¼ŒåŒ…æ‹¬åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤åŸºæœ¬æ“ä½œï¼ŒåŒ…å«åˆ›å»ºã€ä¿®æ”¹æ—¶é—´è®°å½•ï¼Œ**å¹¶ç‰¹è‰²å®ç°éšç§å‘å¸ƒåŠŸèƒ½**
4. è¯„è®ºæ“ä½œï¼ŒåŒ…æ‹¬åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€ç‚¹èµæ“ä½œï¼ŒåŒ…å«è‡ªåŠ¨æ›´æ–°çš„åˆ›å»ºã€æœ€è¿‘ä¿®æ”¹æ—¶é—´è®°å½•

å…·ä½“å®ç°è§Mark 0.1éƒ¨åˆ†

## å®‰å…¨è€ƒé‡ï¼ˆçªå‡ºç‰¹è‰²ï¼‰

æœ¬æ¬¡å¤§ä½œä¸šæˆ‘ä»¬ç»„ç»“åˆä¸“ä¸šç‰¹ç‚¹ï¼Œæ²¡æœ‰å¢åŠ å¤ªå¤šåŠŸèƒ½ï¼Œè€Œæ˜¯å°†å…³æ³¨ç‚¹æ”¾åœ¨å®‰å…¨æ–¹å‘ã€‚

å¤§ä½œä¸šåç«¯ä»£ç æœ‰ä¸¤ä¸ªç‰ˆæœ¬ Mark 0.1ä¸ºä»…åŠŸèƒ½å®ç°ç‰ˆæœ¬ï¼ŒMark 0.2ä¸ºè€ƒè™‘å®‰å…¨æ€§ååšå‡ºçš„æ”¹è¿›ç‰ˆæœ¬ï¼Œä¸»è¦æ”¹è¿›ç‚¹æœ‰ï¼š

1. å°†ç½‘ç»œåŠ«æŒåŠå‰ç«¯è§£åŒ…çº³å…¥è€ƒè™‘ï¼Œé‡‡ç”¨åŠ å¯†ä¼ è¾“ä¸å‚¨å­˜
2. è€ƒè™‘SQLæ³¨å…¥å¨èƒï¼Œå¢åŠ é˜²æ³¨å…¥æªæ–½
3. ä½¿ç”¨ è§†å›¾ å’Œ è§’è‰² å®Œå–„æƒé™æ§åˆ¶

å…·ä½“è§Mark 0.2éƒ¨åˆ†

## æ³¨æ„

æœ¬æ¬¡æ•°æ®åº“å¤§ä½œä¸šä½¿ç”¨ django ä½œä¸ºç½‘ç»œæ¡†æ¶ã€‚

django æ˜¯ååˆ†ä¼˜ç§€çš„é€‚åˆæ–‡ç« ç±»ç½‘ç«™å¿«é€Ÿå¼€å‘çš„ååˆ†ä¼˜ç§€çš„ç½‘ç»œæ¡†æ¶ï¼Œå…¶æœ¬èº«å…·æœ‰éšè—SQLç»†èŠ‚çš„æ•°æ®åº“æ“ä½œã€‚

ä½†ä¸ºäº†å±•ç°è¯¾ç¨‹æ‰€å­¦çŸ¥è¯†ï¼Œæˆ‘ä»¬ä»…ä»…ä½¿ç”¨äº†djangoçš„è·¯å¾„å¯¼èˆªéƒ¨åˆ†ï¼ˆUrlséƒ¨åˆ†ï¼‰ï¼Œdjangoçš„æ¨¡å‹ï¼ˆModelsï¼‰åŠè§†å›¾ï¼ˆViewsï¼‰éƒ¨åˆ†ä¹Ÿä»…ä»…ä½¿ç”¨äº†ä¸Urlsè¿æ¥çš„éƒ¨åˆ†ï¼Œæ•°æ®åº“æ“ä½œçš„ä¸»é¢˜ä½¿ç”¨çš„æ˜¯pythonåµŒå…¥å¼sqlï¼Œæ•°æ®åº“ä½¿ç”¨Mysqlå®Œæˆã€‚

# Mark 0.1

è¯¥ç‰ˆæœ¬ä»…ä¸ºåŠŸèƒ½å®ç°ç‰ˆæœ¬ï¼Œæ¥ä¸‹æ¥çš„åŠŸèƒ½å®ç°ç»†èŠ‚å°†æå‰åµŒå…¥å¼sqlä¸­sqlè¯­å¥çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œä»…å»é™¤pythonä¸­çš„å­—ç¬¦ä¸²æ“ä½œï¼Œæ–¹ä¾¿è€å¸ˆä¸åŠ©æ•™æŸ¥çœ‹

## wx/test_app/views.py  ç™»å½•éƒ¨åˆ†

login: 
~~~mysql
select id,password from auther_user where name = username
~~~

ä»å‰ç«¯è·å–usernameã€passwordï¼Œä»æ•°æ®åº“å–å‡ºusernameç›¸åŒçš„é¡¹çš„idã€passwordï¼Œä¸è·å–çš„passwordå¯¹æ¯”ï¼Œæœ‰åŒ¹é…é¡¹è¯´æ˜å·²æ³¨å†Œä¸”å¯†ç æ­£ç¡®ï¼Œè¿”å›id



signupï¼š
~~~mysql
INSERT INTO auther_user (`name`, `password`) 
VALUES (username,password);
~~~

ä»å‰ç«¯è·å–usernameã€passwordï¼Œæ’å…¥æ•°æ®åº“ç”¨æˆ·è¡¨ï¼Œæ”¯æŒåŒåç”¨æˆ·ï¼Œä¸è€ƒè™‘åŒååŒå¯†ç ç”¨æˆ·

~~~mysql
select id,password from auther_user where name = username;
~~~

ä¸ºå®ç°æ³¨å†Œåç›´æ¥ç™»å½•ï¼Œåœ¨æ’å…¥åç´§æ¥æŸ¥è¯¢æ“ä½œ



userinfoï¼š
~~~mysql
select * from auther_user where name = username;
~~~

ä»å‰ç«¯è·å–usernameï¼ŒæŸ¥è¯¢æ‰€æœ‰ä¿¡æ¯ï¼Œå¹¶ä»¥å­—å…¸jsonå½¢å¼å‘å›ç”¨æˆ·ä¿¡æ¯



userchangeï¼š

```mysql
update auther_user set name=%s,sex=%s,job=%s,age=%s,like=%s where id=%s;
,userinfo['name'], userinfo['sex'], userinfo['job'],userinfo['age'], userinfo['like'],id
```

é€šè¿‡idç¡®å®šç”¨æˆ·ï¼Œä»å‰ç«¯è·å–æ›´æ”¹åçš„ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶æ›´æ–°



userpowerupï¼š

```mysql
select power from auther_user where id=userid;
update auther_user set power%s where id=userid;
,str(power+1)
```

é€šè¿‡useridç¡®å®šç”¨æˆ·ï¼ŒæŸ¥è¯¢æƒé™å¹¶åŠ ä¸€ä¿®æ”¹ï¼Œå‰ç«¯éœ€è¦æ­é…è®¤è¯ç³»ç»Ÿï¼Œæ²¡æœ‰å®ç°



## wx/article/views.py æ–‡ç« éƒ¨åˆ†

article_listï¼š

```mysql
select * from article_post order by updated desc;
```

ä»æ•°æ®åº“æ–‡ç« è¡¨ä¸­å–å‡ºæ–‡ç« ï¼Œä»¥æ›´æ–°æ—¥æœŸé™åºæ’åº



article_Mylistï¼š

```mysql
select * from article_post where author_id=userid order by updated desc;
```

ä»æ•°æ®åº“æ–‡ç« è¡¨ä¸­å–å‡ºç‰¹å®šç”¨æˆ·æ–‡ç« ï¼Œä»¥æ›´æ–°æ—¥æœŸé™åºæ’åº



article_detailï¼š

```mysql
select * from article_post where id=articleid
```

é€šè¿‡æ–‡ç« idç¡®å®šæ–‡ç« ï¼Œé€‰å‡ºæ–‡ç« æ‰€æœ‰ä¿¡æ¯ï¼ŒåŠ å·¥åå‘å›



article_createï¼š

```mysql
insert into article_post(title,body,created,updated,author_id,privacy) values(%s,%s,%s,%s,%s,%s);
,value['title'], value['body'], value['updated'], value['created'], value['id'], value['privacy']
```

é€šè¿‡å‰ç«¯è·å–ä¿¡æ¯ï¼Œæ’å…¥æ–°çš„æ–‡ç« è®°å½•



article_deleteï¼š

```mysql
delete from article_post where id=%s
```

é€šè¿‡å‰ç«¯å‘æ¥çš„idç¡®å®šæ–‡ç« ï¼Œå¹¶åˆ é™¤



article_updateï¼š

```mysql
update article_post set title=%s,body=%s,privacy=%s,updated=%s where id=%s
```

é€šè¿‡å‰ç«¯å‘æ¥çš„idç¡®å®šæ–‡ç« ï¼Œä¿®æ”¹ä¸ºå‰ç«¯æä¾›çš„å†…å®¹



## wx/answer/views.py è¯„è®ºéƒ¨åˆ†



commitAnswerï¼š

```mysql
insert into answer_review(reviewText,writerID_id,questionID_id) values(%s,%s,%s)ï¼›
,request.POST.get("review"),request.POST.get("writerID"),request.POST.get("articleID")
```

å‰ç«¯ä¼ æ¥æ–‡ç« idï¼Œè¯„è®ºè€…idï¼Œå’Œè¯„è®ºå†…å®¹ï¼Œå°†å…¶æ’å…¥



addHelpfulï¼š

```mysql
update answer_review set helpfulVote=helpfulVote+1 where id=id
insert into answer_review_users_like(review_id,user_id) values(idï¼Œuserid)
```

ğŸ‘ï¼Œæ›´æ–°ä¸¤ä¸ªè¡¨ï¼Œæ–‡ç« ç‚¹èµæ•° +- 1ï¼›æ·»åŠ æŸäººå¯¹æŸè¯„è®ºçš„è¯„ä»·è®°å½•ã€‚æ­¤åŠŸèƒ½å‰ç«¯æ²¡æœ‰å®ç°

å–æ¶ˆğŸ‘åŒæ ·åœ¨è¿™ä¸ªå‡½æ•°ä¸­

```mysql
update answer_review set helpfulVote=helpfulVote-1 where id=id
delete from answer_review_users_like where review_id=id and user_id=userid
```

æ–‡ç« ç‚¹èµæ•°-1ï¼Œåˆ é™¤ç‚¹èµè®°å½•



deleteAnswerï¼š

```mysql
delete from answer_review where id=id
```

é€šè¿‡å‰ç«¯å‘æ¥çš„idç¡®å®šè¯„è®ºï¼Œåˆ é™¤è¯„è®º



getAnswerï¼š

```mysql
select * from answer_review where id=id
```

é€šè¿‡å‰ç«¯å‘æ¥çš„idç¡®å®šè¯„è®ºï¼Œè·å–è¯„è®ºçš„å…¨ä½“å†…å®¹ï¼Œé€‰æ‹©æ€§å‘å›



getAnswerListï¼š

```mysql
select * from answer_review where questionID_id=id
```

é€šè¿‡å‰ç«¯å‘æ¥çš„idç¡®å®šæ–‡ç« ï¼Œè·å–æ–‡ç« ä¸‹æ‰€æœ‰è¯„è®º



# Mark 0.1 å®‰å…¨åˆ†æ

Mark 0.1 ä¸ºåŠŸèƒ½å®ç°ç‰ˆï¼Œæ‰€æœ‰ä»£ç çš†ä¸ºæœ€ç®€å•ç‰ˆæœ¬ï¼Œå› æ­¤å­˜åœ¨å„ç§å„æ ·çš„æ¼æ´ã€‚ä¸»è¦æœ‰ä¸‹é¢ä¸‰ç§ï¼š

1. æ§åˆ¶ä¿¡å·åœ¨å®¢æˆ·ç«¯æ˜æ–‡å‚¨å­˜ï¼Œåœ¨ç½‘è·¯ä¸­æ˜æ–‡ä¼ è¾“ï¼Œå¾ˆå®¹æ˜“é­åˆ°æ‹¦æˆªå¹¶ä¿®æ”¹ã€‚å…·ä½“è¡¨ç°ä¸ºç”¨æˆ·idã€æ–‡ç« idã€è¯„è®ºidçš†æ˜æ–‡å‚¨å­˜å¹¶ä¼ è¾“ï¼Œä»–ä»¬åˆåœ¨æœåŠ¡å™¨ä¸­ä½œä¸ºç¡®å®šç”¨æˆ·ã€æ–‡ç« ã€è¯„è®ºçš„æ§åˆ¶ä¿¡å·ã€‚

   å¤§ä½“æ”»å‡»æµç¨‹ä¸ºï¼š

   1. ä¸‹è½½ç½‘é¡µï¼ˆwebæˆ–ä½¿ç”¨è§£åŒ…è½¯ä»¶è§£åŒ…ï¼ˆå°ç¨‹åºã€appï¼‰åè·å–æœåŠ¡å™¨é€šè®¯åœ°å€
   2. ä½¿ç”¨BurpSuiteã€Charlesç­‰çš†å¯å¯¹æœ¬åœ°è¿è¡Œçš„å®¢æˆ·ç«¯è¿›è¡ŒæŠ“åŒ…ï¼Œå¹¶å°†å„ç±»idä¿®æ”¹ä¸ºæƒ³è¦æ”»å‡»çš„
   3. æ­£å¸¸æ¥æ”¶åº”ç­”å¹¶æ˜¾ç¤ºï¼Œä¾¿å¯ä»¥å®ç°è¶Šè¿‡ç™»å½•éªŒè¯çš„æŸ¥çœ‹

   

2. æ•°æ®åº“åŠå…¶æ“ä½œæœªè¿›è¡Œé˜²æ³¨å…¥æ“ä½œï¼Œæ”»å‡»è€…å¯è½»æ˜“å¯¹æ•°æ®åº“è¿›è¡Œsqlæ³¨å…¥æ”»å‡»

   å¤§ä½“æ”»å‡»æµç¨‹ä¸ºï¼š

   1. ä¸‹è½½ç½‘é¡µï¼ˆwebæˆ–ä½¿ç”¨è§£åŒ…è½¯ä»¶è§£åŒ…ï¼ˆå°ç¨‹åºã€appï¼‰åè·å–æœåŠ¡å™¨é€šè®¯åœ°å€
   2. é€šè¿‡æ¥å£è®¾ç½®åŠåç»­æ“ä½œï¼ŒçŒœæµ‹sqlè¯­å¥åŠæ•°æ®åº“è¡¨åã€å±æ€§å
   3. ä½¿ç”¨æ¨¡æ‹Ÿå‘åŒ…è½¯ä»¶å‘è¿”å›æ•°æ®çš„æ¥å£å‘é€æ„é€ å¥½çš„æ³¨å…¥è¯­å¥ï¼Œå¦‚å‘article_Mylistæ¥å£å‘é€idå€¼ '1" or id < 2#' ä¾¿å¯ä»¥é—´æ¥çŸ¥é“2å·ç”¨æˆ·å‘äº†é‚£äº›æ–‡ç« ï¼Œå¯¼è‡´éšç§å‘é€å¤±æ•ˆ
   4. ä½¿ç”¨unionè”åˆæŸ¥æ‰¾å¯å¾—åˆ°æ³¨å…¥æ›´åŠ å±é™©çš„sqlè¯­å¥ï¼Œå®ç°æŸ¥è¯¢ä»»æ„æ•°æ®ï¼Œç”šè‡³ç›´æ¥æ“ä½œæ•°æ®åº“

   

3. æœåŠ¡ç«¯æ˜æ–‡å‚¨å­˜æ‰€æœ‰ä¿¡æ¯ï¼Œå¯¹ç”¨æˆ·éšç§æ— ä¿æŠ¤



# Mark 0.2

é’ˆå¯¹Mark 0.1çš„å®‰å…¨åˆ†æï¼Œæˆ‘ä»¬å¯¹åç«¯ä»£ç è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä¸»è¦æœ‰ï¼š

1. 

2. 
3.  
4. 